<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
{% extends 'miaplicacion/padre.html' %}

  {% block content %}
    <h1>Listado de Blogs</h1>
    <div>
      {% for blog in blogs %}
        <div>
          <!-- Mostrar imagen miniatura si existe -->
          <h2>{{ blog.titulo }}</h2>
          {% if blog.imagen %}
            <img src="{{ blog.imagen.url }}" alt="Imagen de {{ blog.titulo }}" style="width: 150px; height: auto;">
            
          {% endif %}
                
          <p>{{ blog.subtitulo }}</p>
          <a href="{% url 'blog_detail' blog.pk %}">Leer más</a>
          
          {% if request.user == blog.autor %}
            
            <a href="{% url 'blog_edit' blog.pk %}">Editar</a>
            <a href="{% url 'blog_delete' blog.pk %}">Eliminar</a>

          {% endif %}
        </div>
      {% empty %}
        <p>No hay blogs aún.</p>
      {% endfor %}
    </div>
  
    <!-- Agregar botón para crear un nuevo blog -->
    {% if user.is_authenticated %}
      <a href="{% url 'blog_create' %}">Crear nuevo blog</a>
    {% endif %}
  
    <!-- Paginación -->
    <div>
      {% if is_paginated %}
        <span>Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}</span>
  
        {% if page_obj.has_previous %}
          <a href="?page=1">&laquo; primera</a>
          <a href="?page={{ page_obj.previous_page_number }}">anterior</a>
        {% endif %}
  
        {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}">siguiente</a>
          <a href="?page={{ page_obj.paginator.num_pages }}">última &raquo;</a>
        {% endif %}
      {% endif %}
    </div>
  {% endblock %}
  
</body>
</html>

